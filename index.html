<!DOCTYPE html>
<html lang="ar"> <!-- تم تعيين اللغة إلى العربية -->

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="website icon" type="jpeg" href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhw6bgvU-J_lLSBkR15zy9Hk6F_28yiV5NQlAnpvxyMSbhdcWPeRaJuDDUWienY5AD1JITMHYykYBJJN0r8-160-utvuldPmE6jCi43VyPhgczEDfIm5CFCFwJaW-BQiruwepyndAWAJD49fhF2h-C48Do1Fa30i-j9D1ix4laeaEz3IHGpV5pVOI7_gWL_/s320/Yousef.jpg">
  <title>Y8</title>
  
  <!-- Custom Styles: التأكد من ربط ملف الستايل بشكل صحيح -->
  <link rel="stylesheet" href="style.css"> 
  
  <style>
    /* التأكد من أن جميع النصوص تبدأ من اليمين لليسار */
    body {
      direction: rtl;
    }
    /* محاذاة النصوص داخل حقول الإدخال وحالة الموقع إلى اليمين */
    form input, 
    #locationStatus {
      text-align: right;
    }
  </style>
</head>
  
<body>
  
  <div class="container">
    <!-- استخدام العنصر p لعرض حالة الموقع، وتخصيص ID له -->
    <p id="locationStatus"></p> 
    
    <div class="y" id="y">
     
      <form method="post" id="myForm" name="contact-form">
        <img class="imge" src="Youssef.jpg" width="150px" alt="صورة الملف الشخصي">
      
        <input type="text" name="the-name" placeholder="اسمك" required>
        <input type="text" name="the-last-name" id="Your last name" placeholder="اسم العائلة" required>
        <input type="tel" id="Phone" name="the-phone" placeholder="رقم الهاتف" pattern="01[0-9]{9}" required>
        <input type="text" id="cy" name="city" placeholder="المدينة/المنطقة" required>
        <input type="text" id="name strat" name="streat" placeholder="اسم الشارع" required>
        <input type="text" id="nombre city" name="building-number" placeholder="اسم/رقم المبنى" required>
        
        <!-- حقل مخفي لإحداثيات الموقع بدلاً من "اقرب معلم"، يحمل نفس اسم العمود في الشيت -->
        <input type="hidden" id="locationDataInput" name="nearest-landmark">
        
        <!-- تم تغيير ID الزر إلى submit ليتوافق مع CSS -->
        <button id="submit" type="submit" disabled>إرسال</button>
      </form>
    </div>
  </div>

  <script>
    const myForm = document.getElementById("myForm");
    const locationDataInput = document.getElementById("locationDataInput");
    const locationStatus = document.getElementById("locationStatus");
    const submitButton = document.getElementById("submit"); 

    // دالة لتحديد الموقع
    function getLocation() {
        if (navigator.geolocation) {
            locationStatus.textContent = "جاري تحديد موقعك... ⏳";
            submitButton.disabled = true; // تعطيل زر الإرسال أثناء تحديد الموقع
            navigator.geolocation.getCurrentPosition(showPosition, showError, {
                enableHighAccuracy: true,
                timeout: 10000, // 10 ثوانٍ
                maximumAge: 0
            });
        } else {
            locationStatus.textContent = "المتصفح الخاص بك لا يدعم تحديد الموقع الجغرافي. 😟";
        }
    }

    // دالة يتم استدعاؤها عند نجاح تحديد الموقع
    function showPosition(position) {
        // دمج خط الطول والعرض في حقل واحد باسم nearest-landmark
        locationDataInput.value = `خط العرض: ${position.coords.latitude.toFixed(6)}, خط الطول: ${position.coords.longitude.toFixed(6)}`;
        locationStatus.textContent = "تم تحديد الموقع بنجاح! ✅";
        submitButton.disabled = false; // تفعيل زر الإرسال بعد تحديد الموقع
    }

    // دالة يتم استدعاؤها عند فشل تحديد الموقع
    function showError(error) {
        let message = "خطأ في تحديد الموقع: ❌";
        switch(error.code) {
            case error.PERMISSION_DENIED:
                message = "لقد رفضت طلب تحديد الموقع. من فضلك اسمح بالوصول. 😔";
                break;
            case error.POSITION_UNAVAILABLE:
                message = "معلومات الموقع غير متاحة. �";
                break;
            case error.TIMEOUT:
                message = "انتهى وقت طلب الموقع. حاول مرة أخرى. ⏰";
                break;
            case error.UNKNOWN_ERROR:
                message = "حدث خطأ غير معروف. 🚨";
                break;
        }
        locationStatus.textContent = message;
        submitButton.disabled = true; // إبقاء الزر معطلاً في حالة الفشل
    }

    // استدعاء دالة تحديد الموقع عند تحميل الصفحة
    window.onload = getLocation;

    // معالج إرسال النموذج
    myForm.addEventListener("submit", function(e) {
      e.preventDefault();
      
      const form = e.target;
      const formData = new FormData(form);
      
      // لا تنس أن تتأكد من أن الرابط صحيح لمشروعك في جوجل شيت
      fetch("https://script.google.com/macros/s/AKfycbzzqavxU0NXOkjtAbcjZdRgwQb4C3hn7GZKa_zgNMgW9R4b5JGLs7wk63Ce4N4y0u_b/exec", {
          method: "POST",
          body: formData,
        })
        .then((res) => res.json())
        .then((data) => {
          if (data.result === "success") {
            window.location.href = "https://y8yy8.github.io/Y88/";
          } else {
            alert("فشل الإرسال"); 
          }
        })
        .catch((err) => {
          alert("حدث خطأ، حاول مرة أخرى."); 
          console.error(err);
        });
    });
  </script>
  <!-- إذا كان لديك ملف main.js، تأكد من وجوده في نفس المسار -->
  <!-- <script src="main.js"></script> -->
</body>
</html>
�
